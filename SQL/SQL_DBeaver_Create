-- Create a database
CREATE DATABASE FoodOrdering;

-- Create a customers table. No Foreign key as it just holds info about the customer themselves. 
CREATE TABLE Customers (
	customer_id INT PRIMARY KEY,
	name VARCHAR(255),
	email VARCHAR(255),
	created_at DATETIME
);

-- Create a menu items table
CREATE TABLE MenuItems (
	item_id INT PRIMARY KEY,
	name VARCHAR(255),
	description VARCHAR(255),
	price DECIMAL(5,2),
	availability BOOLEAN
);

-- Create orders table that contains order_id and date
CREATE TABLE Orders (
	order_id INT PRIMARY KEY,
	customer_id INT,
	date DATETIME,
	FOREIGN KEY (customer_id) REFERENCES Customers(customer_id)
);

-- Create an OrdersItems table which connects the other tables

CREATE TABLE OrdersItems (
	order_item_id INT PRIMARY KEY,
	order_id INT,
	item_id INT,
	quantity INT,
	FOREIGN KEY (order_id) REFERENCES Orders(order_id),
	FOREIGN KEY (item_id) REFERENCES MenuItems(item_id)
);

-- add primary and foreign key constraints 

-- insert sample data into the tables to simulate customer data 
INSERT INTO Customers 
VALUES
	(1, 'John Doe', 'john@example.com', NOW()),
	(2, 'Jane Smith', 'jane@example.com', NOW()),
	(3, 'Dwayne Johnson', 'dwayne@example.com', NOW());

INSERT INTO MenuItems 
VALUES
	(1, 'Pizza', 'Cheesy pepperoni pizza', 8.99, TRUE),
	(2, 'Burger', 'Beef burger with lettuce and tomato', 6.50, TRUE),
	(3, 'Salad', 'Fresh garden salad with dressing', 4.25, TRUE),
	(4, 'Ice Cream', 'Vanilla ice cream scoop', 2.75, TRUE);

INSERT INTO Orders
VALUES
    (1, 1, '2023-10-29 10:15:00'),
    (2, 2, '2023-10-30 12:30:00'),
    (3, 3, '2023-10-31 14:45:00');

INSERT INTO OrdersItems
VALUES
	(1, 1, 1, 2),
	(2, 1, 4, 1),
	(3, 2, 2, 1),
	(4, 3, 3, 1),
	(5, 3, 4, 2);  
